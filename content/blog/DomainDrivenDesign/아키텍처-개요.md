---
title: 아키텍처 개요
date: 2019-12-29 16:12:74
category: DomainDrivenDesign
draft: false
---

## 네 개의 영역
## 계층 구조 아키텍처
## DIP
## 도메인 영역의 주요 구성요소
응용 서비스와 Repository는 밀접한 연관이 있다.
  - 응용 서비스는 필요한 도메인 객체를 구하거나 저장할 때 Repository를 사용한다.
  - 응용 서비스는 트랜잭션을 관리하는데, 트랜잭션 처리는 Repository 구현 기술에 영향을 받는다.

## 요청 처리 흐름
![](./assets/요청처리흐름.jpeg)
1. 사용자가 애플리케이션에 기능 실행 요청을 표현 영역에서 받는다.
2. 사용자의 요청을 검사하고 응용 서비스가 요구하는 형식으로 변환하여 응용 영역으로 전달한다.
3. 기능 구현에 필요한 도메인 객체를 Repository에서 가져와 도메인 로직을 실행하거나 신규 도메인 객체를 생성해서 Repository에 저장한다.
  - 도메인 객체를 사용해서 사용자의 요청을 처리
  - 트랜잭션 관리 및 처리 ex) 회원가입 성공 시, 회원 정보를 DB에 반영해야함.
  - @Transactional
4. 실행 결과를 사용자에게 리턴한다.

## 인프라스트럭처 개요
표현, 응용, 도메인 영역을 지원하는 영역이다.
  - 인프라스트럭처를 직접 사용하는 것보다 각자의 영역에서 정의한 인터페이스를 인프라스트럭처 영역에서 구현하는 것이 좋다.
    - 교체와 테스트의 어려움을 해결할 수 있다.
  - 무조건 인프라스트럭처에 대한 의존을 없애는 것이 좋은 것은 아니다. 
    - @Transactional을 사용하는 것이 편리하다.
  - 의존을 완전히 갖지 않도록 시도하는 것은 구현을 더 복잡하고 어렵게 만들 수 있다.
따라서, DIP의 장점을 해치지 않는 범위에서 응용 영역과 도메인 영역에서 구현 기술에 대한 의존을 가져가는 것이 현명하다.

## 모듈 구성
- 한 패키지에 가능하면 10개 미만으로 타입 개수를 유지하려고 노력한다.
- 이 개수가 넘어가면 모듈을 분리하여 시도해 본다.