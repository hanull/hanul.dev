---
title: 젠킨스(jenkins)에 대해서 알아보자
date: 2021-07-05 23:07:36
category: devops
draft: false
---

## 젠킨스(Jenkins)란?
젠킨스는 소프트웨어 개발 시 지속적인 통합 서비스를 제공하는 CI툴이다. 빌드, 테스트, 배포 등 모든 것을 자동화 해주는 서버이다.

## 젠킨스 사용하게 된 이유
과거 소프트웨어 개발은 제조업에 개발 흐름을 따라 WATERFALL, 폭포수 모델을 차용했다.
폭포수 모델은 **요구사항 분석-> 시스템 설계 -> 구현 -> 테스트 -> 배포 -> 유지 보수** 순으로 
각각 단계에 굉장히 오랜 시간이 걸렸고, 개발을 하고 있을 때 테스트팀과 배포팀은 딱히 다른일을 하지 않고 개발이 완성되면 그때부터 개별 branch들을 통합하면서 테스트를 진행했다. 따라서 통합을 할 때 개별 branch들을 합치는 과정에 굉장히 많은 시간이 소요되었고 이러한 과정은 요구사항이 많은 현재의 개발에 전혀 부합하지 않는 방법론이다.


따라서 `Agile` 방법론이 대세로 떠올랐고 애자일 방식의 핵심은 빠르고 유연하며 조금씩 발전되는 소프트웨어 개발을 통해 목표를 계속 수정해 나가는 것이다.  Agile 방법론에서는 계속 변경되는 요구사항을 만족하기 위해 폭포수 모델에서 행했던 싸이클을 여러번 도는 과정을 통해 소프트웨어 개발을 진행한다.


이렇게 진행되는 Agile방법론에서는 빠른 싸이클로 개발을 진행하기 위해 지속적인 통합과 배포가 필수적이 되었다. 


하지만 통합, 테스트는 불필요한 반복전인 작업이다. 따라서 자동으로 지속적인 코드 통합, 배포를 위해서 `Jenkins`를 이용하게 된 것이다.


## 젠킨스 역할
- Build 자동화
    - maven과 gradle을 젠킨스와 연동하여 빌드 자동화를 통해 프로젝트 진행의 효율성을 높일 수 있다.
- 자동화 테스트
    - Git과 같은 버전관리시스템과 연동하여 코드 변경을 감지하고 자동화 테스트를 수행하기 때문에 만약 개인이 미처 실시하지 못한 테스트가 있다 하여도 든든한 안전망이 되어준다.
- 코드 표준 준수여부 검사
    - 자동화 테스트와 마찬가지로 개인이 미처 실시하지 못한 코드 표준 준수 여부의 검사나 정적 분석을 통한 코드 품질 검사를 빌드 내부에서 수행함으로써 기술적 부채의 감소에도 크게 기여한다.
- 빌드 파이프라인 구성
    - 2개 이상의 모듈로 구성되는 레이어드 아키텍처가 적용 된 프로젝트에는 그에 따는 빌드 파이프라인 구성이 필요하다. 예를 들면, 도메인 -> 서비스 -> UI와 같이 각 레이어의 참조 관계에 따라 순차적으로 빌드를 진행하지 않으면 안된다. 젠킨스에서는 이러한 빌드 파이프라인의 구성을 간단히 할 수 있으며, 스크립트를 통해서 매우 복잡한 제어까지도 가능하다.

## 주요 플러그인
### 1. Credentials Plugin 
젠킨스는 단지 서버일 뿐이기 때문에 배포에 필요한 각종 리소스에 접근하기 위해서는 여러 중요한 정보를 저장하고 있어야한다.
이러한 중요한 정보(AWS token, Git Access token 등)를 저장해 주는 플러그인이다.

### 2. Pipeline Plugin 
파이프라인이란 CI/CD 파이프라인을 젠킨스에 구현하기 위한 일련의 플러그인들의 집합을 말한다.
즉, 여러 플러그인들을 이 파이프라인에서 용도에 맞게 사용하고, 정의함으로써 파이프라인을 통해서 서비스가 배포된다.

Declarative, Scripted Pipeline 두 형태의 Pipeline Syntax가 존재한다. 더 최신이고 가독성이 좋은 Declarative를 주로 사용한다.

**Pipeline Syntax**
- Agent Section
    - 어떤 젠킨스가 일을 하게 할 것인지를 지정한다
    - 젠킨스 노드 관리에서 새로 노드를 띄우거나 Docker 이미지를 통해 처리 가능
- Post Section
    - 스테이지가 끝난 이후의 결과에 따라 후속 조취를 취한다.
    - success, failure, always, cleanup
- Stages Section
    - 어떤 일들을 처리할 것인지 일련의 stage를 정의 (카테고리라고 생각)
- Steps Section
    - 한 stage 안에서의 단계로, 일련의 과정을 보여줌

- Declaratives
    - Enviroment : 어떤 Pipeline, stage scope 의 환경 변
    - Parameter : 파이프라인 실행 시 파마미터 받음
    - Trigger : 어떤 형태로 트리거 되는지 (어떤 주기로 실행 되는지)
    - When : 언제 실행되는지

### 3. Docker Plugin & Docker Pipeline 
젠킨스에서 도커를 사용하기 위함


### 참고
- https://ict-nroo.tistory.com/31
- https://tjdrnr05571.tistory.com/12